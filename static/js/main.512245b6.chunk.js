(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{184:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(20),l=n.n(r),i=(n(520),n(26)),c=n(18),u=n(111),s=n(534),f=n(535),m=n(533),p=n(110),d=n.n(p),h=n(7);n(505);function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,E(t).apply(this,arguments))}var n,a,r,l,i;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.setState({isLoading:JSON.parse(localStorage.getItem("isReturningUser"))}),this.unsubscribeAuthStateChanged=Object(c.auth)().onAuthStateChanged(function(t){if(t){Object(c.auth)().user=t,Object(c.database)().user=Object(c.database)().ref(t.uid),localStorage.setItem("user",JSON.stringify(t));var n=e.props.location&&e.props.location.state&&e.props.location.state.from&&e.props.location.state.from.pathname||"/home";e.props.history.replace(n)}else e.setState({isLoading:!1})})}},{key:"UNSAFE_componentWillUnmount",value:function(){this.unsubscribeAuthStateChanged()}},{key:"login",value:(l=d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("isReturningUser",!0),Object(c.auth)().signInWithRedirect(new c.auth.FacebookAuthProvider);case 2:case"end":return e.stop()}},e,this)}),i=function(){var e=this,t=arguments;return new Promise(function(n,a){var o=l.apply(e,t);function r(e,t){try{var r=o[e](t),l=r.value}catch(e){return void a(e)}r.done?n(l):Promise.resolve(l).then(i,c)}function i(e){r("next",e)}function c(e){r("throw",e)}i()})},function(){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.isLoading;return o.a.createElement("div",{className:"login-page"},o.a.createElement("div",{className:"login-page-background-container"},o.a.createElement("img",{className:"login-page-background-image",src:"img/loginpage1.jpg",alt:"login page"}),o.a.createElement("div",{className:"login-page-background-overlay"})),o.a.createElement("div",{className:"login-page-content"},o.a.createElement("div",{className:"login-page-title"},"Food Journal"),o.a.createElement("p",{className:"login-page-subtitle"},"keeping track of what you eat"),o.a.createElement(h.c,{variant:"contained",onClick:this.login,disabled:e},"Login with facebook"),e?o.a.createElement(h.d,{color:"secondary"}):null))}}])&&v(n.prototype,a),r&&v(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");g(e.prototype,t&&t.prototype),t&&g(e,t)}(t,e),t}(a.Component);n(197);function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){k(e,t,n[t])})}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=e.start,n=e.end,a=e.ascending,o=void 0===a||a;return Object(c.database)().user.child("meals").orderByChild("date").startAt(t).endAt(n).once("value").then(function(e){var t=[];return e.forEach(function(e){t.push(S({},e.val(),{id:e.key}))}),o?t:t.reverse()})}n(195);function M(e){return(M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){j(e,t,n[t])})}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function A(e,t){return!t||"object"!==M(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var R=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return A(a,(n=a=A(this,(e=P(t)).call.apply(e,[this].concat(r))),a.state={},a.handleTitleChanged=function(e){var t=e.target.value,n=O({},a.state.meal,{title:t});a.setState({meal:n})},a.handleMealTypeChanged=function(e){var t=e.target.value,n=O({},a.state.meal,{type:t});a.setState({meal:n})},a.handleConfirm=function(){var e=a.state,t=e.meal;e.isEditing?function(e){Object(c.database)().user.child("meals").child(e.id).update(e)}(t):function(e){Object(c.database)().user.child("meals").push(S({},e,{date:c.database.ServerValue.TIMESTAMP}))}(t),a.props.onConfirm(t)},a.handleOnRemoveClicked=function(){a.setState({showRemoveConfirmDialog:!0})},a.handleCancelRemove=function(){a.setState({showRemoveConfirmDialog:!1})},a.handleConfirmRemove=function(){var e;a.setState({showRemoveConfirmDialog:!1}),e=a.state.meal,Object(c.database)().user.child("meals").child(e.id).remove(),a.props.onRemove(a.props.meal)},n))}var n,a,r;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({meal:O({},this.props.meal),isEditing:!!this.props.meal})}},{key:"render",value:function(){var e=this.props.onCancel,t=this.state,n=t.meal,a=t.isEditing,r=t.showRemoveConfirmDialog,l=!!n.type&&!!n.title;return o.a.createElement(h.e,{open:!0},o.a.createElement(h.i,null,a?"Edit Meal":"Add Meal"),o.a.createElement(h.g,null,o.a.createElement("div",null,o.a.createElement(h.C,{label:"Name of meal",value:n.title||"",onChange:this.handleTitleChanged,margin:"normal",helperText:"required"})),a?o.a.createElement(h.c,{style:{position:"absolute",top:20,right:20},color:"secondary",onClick:this.handleOnRemoveClicked},"Remove"):null,o.a.createElement("form",{className:"edit-meal-type-form",autoComplete:"off"},o.a.createElement(h.l,{style:{minWidth:120}},o.a.createElement(h.q,{htmlFor:"edit-meal-type"},"Meal Type"),o.a.createElement(h.z,{value:n.type||"",onChange:this.handleMealTypeChanged,input:o.a.createElement(h.p,{name:"Meal Type",id:"edit-meal-type"})},o.a.createElement(h.x,{value:"junk"},"Junk food"),o.a.createElement(h.x,{value:"meat"},"Meat"),o.a.createElement(h.x,{value:"vegan"},"Vegan"),o.a.createElement(h.x,{value:"vegetarian"},"Vegetarian")),o.a.createElement(h.m,null,"required"))),o.a.createElement(h.f,null,o.a.createElement(h.c,{color:"primary",onClick:e},"Cancel"),o.a.createElement(h.c,{color:"primary",onClick:this.handleConfirm,disabled:!l},a?"Confirm":"Add"))),r?o.a.createElement(h.e,{open:!0},o.a.createElement(h.i,null,"Remove ".concat(n.title,"?")),o.a.createElement(h.g,null,o.a.createElement(h.h,null,"Are you sure you want to delete ",n.title,"?")),o.a.createElement(h.f,null,o.a.createElement(h.c,{onClick:this.handleCancelRemove,color:"primary"},"Cancel"),o.a.createElement(h.c,{onClick:this.handleConfirmRemove,color:"secondary"},"Remove"))):null)}}])&&_(n.prototype,a),r&&_(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");T(e.prototype,t&&t.prototype),t&&T(e,t)}(t,e),t}(a.Component);function N(){var e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),end:new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59).getTime()}}function D(){var e,t,n,a=new Date;return{start:(e=a,t=(e=new Date(e)).getDay(),n=e.getDate()-t+(0===t?-6:1),new Date(e.setDate(n))).getTime(),end:a.getTime()}}function F(e){return(F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function L(e,t){return!t||"object"!==F(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var B=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return L(a,(n=a=L(this,(e=W(t)).call.apply(e,[this].concat(r))),a.state={showAddModal:!1,isFetching:!0,meals:null},a.handleAddMealClicked=function(){a.setState({showAddModal:!0})},a.handleCloseModal=function(){a.setState({showAddModal:!1,editMeal:null})},a.handleMealClicked=function(e){a.setState({showAddModal:!0,editMeal:e})},a.handleMealConfirmed=function(e){var t=(a.state.meals||[]).map(function(t){return t.id===e.id?e:t});e.id||(e.id=Date.now(),t.push(e)),a.setState({meals:t,showAddModal:!1})},a.handleRemoveMeal=function(e){var t=a.state.meals.filter(function(t){return t.id!==e.id});a.setState({meals:t,showAddModal:!1,editMeal:null})},n))}var n,a,r;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.mounted=!0,this.setState({isFetching:!0,isError:!1}),C(N()).then(function(t){e.mounted&&(console.log("got meals",t),e.setState({meals:t,isFetching:!1}))}).catch(function(t){e.mounted&&(e.setState({isFetching:!1,isError:!0}),console.error("error fetching meals",t))})}},{key:"UNSAFE_componentWillUnmount",value:function(){this.mounted=!0}},{key:"render",value:function(){var e=this,t=this.state,n=t.meals,a=t.showAddModal,r=t.editMeal,l=t.isFetching;return o.a.createElement("div",{className:"home-page"},o.a.createElement("div",{className:"home-page-content"},o.a.createElement(h.E,{variant:"display1",gutterBottom:!0},"Today"),l?o.a.createElement(h.d,{color:"secondary"}):o.a.createElement(h.r,null,n&&n.length?n.map(function(t){return o.a.createElement(h.s,{key:t.id,onClick:function(){e.handleMealClicked(t)}},o.a.createElement(h.u,{primary:t.title,secondary:t.type}))}):o.a.createElement(h.E,null,"You haven't added any meals today. Add some meals by clicking on the button below."))),o.a.createElement(h.y,{open:a},o.a.createElement(R,{meal:r,onConfirm:this.handleMealConfirmed,onCancel:this.handleCloseModal,onRemove:this.handleRemoveMeal})),o.a.createElement("div",{className:"home-page-add-button-container"},o.a.createElement(h.c,{variant:"extendedFab",onClick:this.handleAddMealClicked},o.a.createElement(h.n,{style:{marginRight:10}},"add"),"Add Meal")))}}])&&U(n.prototype,a),r&&U(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");x(e.prototype,t&&t.prototype),t&&x(e,t)}(t,e),t}(a.Component),I=n(537),J=n.n(I);n(193);function G(e){return(G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function q(e,t){return!t||"object"!==G(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Q=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return q(a,(n=a=q(this,(e=z(t)).call.apply(e,[this].concat(r))),a.state={goalValue:0,mealTypeButtonRef:null},a.handleGoalPercentageChanged=function(e,t){a.setGoalPercentageDebouncer(t),a.setState({goalPercentage:t})},a.handleMealTypeClick=function(e){a.setState({mealTypeButtonRef:e.target})},a.handleMealTypeMenuClose=function(){a.setState({mealTypeButtonRef:null})},a.handleMealTypeSelected=function(e){var t=e.target.getAttribute("value"),n=e.target.textContent;a.setState({mealTypeButtonRef:null,goalMealType:n}),a.goalRef.child("mealType").set(t)},n))}var n,a,r;return n=t,(a=[{key:"handleSignout",value:function(){Object(c.auth)().signOut().then(function(){localStorage.clear(),window.location.href=window.location.href}).catch(function(e){console.error("error signing out",e)})}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.mounted=!0,this.goalRef=Object(c.database)().user.child("goal"),this.goalRef.once("value").then(function(t){if(e.mounted){var n=t.val();n&&e.setState({goalPercentage:n.percentage,goalMealType:n.mealType})}}).catch(function(t){e.mounted&&console.error("error fetching goal")}),this.setGoalPercentageDebouncer=function(e,t){if("number"!==typeof e)throw new Error("you must pass in a number");if("function"!==typeof t)throw new Error("you must pass in a function");var n,a=!1;function o(){a||(clearTimeout(n),n=setTimeout.apply(null,[t,e].concat(Array.prototype.slice.call(arguments))))}return o.destroy=function(){a||(clearTimeout(n),n=null,a=!0)},o}(500,function(t){t=Math.round(t),console.log("setting goal percentage to",t),e.goalRef.child("percentage").set(t)})}},{key:"UNSAFE_componentWillUnmount",value:function(){this.mounted=!1,this.setGoalPercentageDebouncer.destroy()}},{key:"render",value:function(){var e=this.state,t=e.goalPercentage,n=e.goalMealType,a=e.mealTypeButtonRef,r=this.props.classes;return o.a.createElement("div",{className:"settings-page"},o.a.createElement(h.E,{variant:"display1",gutterBottom:!0},"Settings"),o.a.createElement("div",null,o.a.createElement(h.E,null,"What percentage of a specific kind of meal type would you like as your goal?"),o.a.createElement("div",{className:r.goalContainer},o.a.createElement(J.a,{style:{marginRight:20},value:t||0,onChange:this.handleGoalPercentageChanged}),o.a.createElement(h.E,{variant:"subheading",className:r.goalPercentage},"".concat(Math.round(t),"%")),o.a.createElement(h.c,{onClick:this.handleMealTypeClick,className:r.goalMealType},n||"Meal Type"),o.a.createElement(h.w,{anchorEl:a,open:Boolean(a),onClose:this.handleMealTypeMenuClose},o.a.createElement(h.x,{value:"junk",onClick:this.handleMealTypeSelected},"Junk Food"),o.a.createElement(h.x,{value:"meat",onClick:this.handleMealTypeSelected},"Meat"),o.a.createElement(h.x,{value:"vegan",onClick:this.handleMealTypeSelected},"Vegan"),o.a.createElement(h.x,{value:"vegetarian",onClick:this.handleMealTypeSelected},"Vegetarian")))),o.a.createElement("div",{className:"settings-page-link-container"},o.a.createElement("a",{className:"settings-page-link",href:"".concat(window.location.origin+"/food-journal","/privacy-policy.html")},"Privacy Policy"),o.a.createElement("a",{className:"settings-page-link",href:"".concat(window.location.origin+"/food-journal","/terms-of-service.html")},"Terms of Service")),o.a.createElement(h.c,{variant:"raised",color:"secondary",onClick:this.handleSignout},"Sign out"))}}])&&Y(n.prototype,a),r&&Y(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");V(e.prototype,t&&t.prototype),t&&V(e,t)}(t,e),t}(a.Component),H=Object(i.withStyles)({goalContainer:{display:"flex",alignItems:"center"},goalPercentage:{marginRight:10},goalMealType:{flexShrink:0}})(Q);n(189);function K(e){return(K="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function X(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var te=function(e){var t=e.title,n=e.value;return o.a.createElement("div",{className:"stats-page-stat"},o.a.createElement(h.E,{className:"state-page-state-title"},t),o.a.createElement("div",{className:"stats-page-percentage-container"},o.a.createElement("div",{className:"stats-page-percentage-bar",style:{width:(n||0)+"%"}})),o.a.createElement(h.E,{style:{display:"inline"}},parseFloat((n||0).toFixed(1))+"%"))};var ne=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return X(a,(n=a=X(this,(e=ee(t)).call.apply(e,[this].concat(r))),a.state={stats:null,value:0},a.handleTabClicked=function(e,t){switch(t){case 0:a.loadMeals(N(),"today");break;case 1:a.loadMeals(D(),"week");break;case 2:a.loadMeals((n=new Date,{start:new Date(n.getFullYear(),n.getMonth()).getTime(),end:n.getTime()}),"month");break;case 3:a.loadMeals(function(){var e=new Date;return{start:new Date(e.getFullYear(),0).getTime(),end:e.getTime()}}(),"year",function(e,t){a.state.goal||Object(c.database)().user.child("goal").once("value").then(function(e){if(a.mounted){var n=e.val();if(n){var o=t.filter(function(e){return e.type===n.mealType}).length;console.log("numMealsTowardGoal",o,t.length,n);var r=Math.round((n.percentage/100*t.length-o)/(1-n.percentage/100));a.setState({numMealsToReachGoal:r,goal:n})}}}).catch(function(e){a.mounted&&console.error("error fetching goal",e)})});break;default:console.warn("unhandled value",t)}var n;a.setState({value:t})},n))}var n,a,r;return n=t,(a=[{key:"loadMeals",value:function(e,t,n){var a,o=this;this.cancelLoading&&(this.cancelLoading(),this.cancelLoading=null),a=this[t]?Promise.resolve(this[t]):C(e),this.setState({isLoading:!0,error:null,meals:null}),this.cancelLoading=function(e,t){var n=!1;return e.then(function(e){n||t(null,e)}).catch(function(e){n||t(e,null)}),function(){n=!0}}(a,function(e,a){console.log("got meals",a),o.setState({error:e,stats:function(e){var t=0,n=0,a=0,o=0;return(e=e||[]).forEach(function(e){"meat"===e.type&&t++,"vegetarian"===e.type&&n++,"vegan"===e.type&&a++,"junk"===e.type&&o++}),{meat:100*t/e.length,vegetarian:100*n/e.length,vegan:100*a/e.length,junkFood:100*o/e.length}}(a),isLoading:!1}),o[t]=a,"function"===typeof n&&n(e,a)})}},{key:"UNSAFE_componentWillMount",value:function(){this.mounted=!0,this.handleTabClicked(null,0)}},{key:"UNSAFE_componentWillUnMount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t=this.state.stats||{},n=this.state,a=n.value,r=n.goal,l=n.numMealsToReachGoal;return o.a.createElement("div",{className:"stats-page"},o.a.createElement(h.E,{variant:"display1",gutterBottom:!0},"Statistics"),o.a.createElement(h.B,{value:a,onChange:this.handleTabClicked,indicatorColor:"primary",textColor:"primary",scrollable:!0,scrollButtons:"auto"},o.a.createElement(h.A,{label:"Today"}),o.a.createElement(h.A,{label:"Week"}),o.a.createElement(h.A,{label:"Month"}),o.a.createElement(h.A,{label:"Year"})),o.a.createElement("div",{className:"stats-page-chart"},o.a.createElement(te,{title:"Junk Food",value:t.junkFood}),o.a.createElement(te,{title:"Meat",value:t.meat}),o.a.createElement(te,{title:"Vegan",value:t.vegan}),o.a.createElement(te,{title:"Vegetarian",value:t.vegetarian})),r&&void 0!==l?o.a.createElement(h.E,{gutterBottom:!0},"".concat(l," meals to reach ").concat(r.percentage,"% ").concat((e=r.mealType).charAt(0).toUpperCase()+e.slice(1).toLowerCase())):null)}}])&&$(n.prototype,a),r&&$(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Z(e.prototype,t&&t.prototype),t&&Z(e,t)}(t,e),t}(a.Component);n(187);function ae(e){return(ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function le(e,t){return!t||"object"!==ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var ce=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return le(a,(n=a=le(this,(e=ie(t)).call.apply(e,[this].concat(r))),a.state={sections:null},a.handleMealClicked=function(e){return function(){a.setState({editMeal:e})}},a.handleCloseModal=function(){a.setState({editMeal:null})},a.handleMealConfirmed=function(e){var t=(a.state.sections||[]).map(function(t){return t.meals=t.meals.map(function(t){return t.id===e.id?e:t}),t});a.setState({sections:t,editMeal:null})},a.handleRemoveMeal=function(e){var t=(a.state.sections||[]).map(function(t){return t.meals=t.meals.filter(function(t){return t.id!==e.id}),t});a.setState({sections:t,editMeal:null})},n))}var n,a,r;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.mounted=!0,this.setState({sections:null,isLoading:!0,error:!1}),C({start:0,end:Date.now(),ascending:!1}).then(function(t){e.mounted&&(e.setMeals(t),e.setState({isLoading:!1}))}).catch(function(t){e.mounted&&e.setState({sections:null,isLoading:!1,error:!0})})}},{key:"setMeals",value:function(e){var t=[];e.forEach(function(e){var n=new Date(e.date),a=t[t.length-1];a&&n.getDate()===a.date.getDate()||(t.push({date:n,meals:[]}),a=t[t.length-1]),a.meals.push(e)}),this.setState({sections:t})}},{key:"UNSAFE_componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.sections,a=t.editMeal,r=t.isLoading,l=!!a;return o.a.createElement("div",{className:"history-page"},o.a.createElement(h.E,{variant:"display1",gutterBottom:!0},"Meal History"),o.a.createElement("div",null,r?o.a.createElement(h.d,{color:"secondary"}):o.a.createElement(h.r,{subheader:o.a.createElement("li",null)},n&&n.length?n.map(function(t){return o.a.createElement("li",{key:"".concat(t.date)},o.a.createElement("ul",null,o.a.createElement(h.v,{className:"section-header"},t.date.toLocaleDateString()),o.a.createElement(h.j,null),t.meals.map(function(t){return o.a.createElement(h.s,{key:t.id,onClick:e.handleMealClicked(t)},o.a.createElement(h.u,{primary:t.title,secondary:t.type}))})))}):null)),o.a.createElement(h.y,{open:l},o.a.createElement(R,{meal:a,onRemove:this.handleRemoveMeal,onConfirm:this.handleMealConfirmed,onCancel:this.handleCloseModal})))}}])&&re(n.prototype,a),r&&re(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");oe(e.prototype,t&&t.prototype),t&&oe(e,t)}(t,e),t}(a.Component),ue=n(536);function se(e){return(se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pe(e,t){return!t||"object"!==se(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var he=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return pe(a,(n=a=pe(this,(e=de(t)).call.apply(e,[this].concat(r))),a.state={openMenu:!1},n))}var n,a,r;return n=t,(a=[{key:"closeMenu",value:function(){this.setState({openMenu:!1})}},{key:"openMenu",value:function(){this.setState({openMenu:!0})}},{key:"navigateTo",value:function(e){this.closeMenu(),this.props.history.replace(e)}},{key:"render",value:function(){var e=this;return o.a.createElement(h.a,{position:"static"},o.a.createElement(h.D,null,o.a.createElement(h.o,{color:"inherit","aria-label":"Menu",onClick:function(){e.openMenu()}},o.a.createElement(h.n,null,"menu")),o.a.createElement("div",null,"Food Journal")),o.a.createElement(h.k,{open:this.state.openMenu,onClose:function(){e.closeMenu()}},o.a.createElement("div",{tabIndex:0,role:"button",onClick:function(){}},Object(c.auth)().user?o.a.createElement(h.r,{component:"nav"},o.a.createElement(h.s,{dense:!0,button:!0},o.a.createElement(h.b,{alt:"Remy Sharp",src:Object(c.auth)().user.photoURL}),o.a.createElement(h.u,{primary:Object(c.auth)().user.displayName})),o.a.createElement(h.s,{button:!0,onClick:function(){e.navigateTo("/home")}},o.a.createElement(h.t,null,o.a.createElement(h.n,null,"today")),o.a.createElement(h.u,{primary:"Today"})),o.a.createElement(h.s,{button:!0,onClick:function(){e.navigateTo("/history")}},o.a.createElement(h.t,null,o.a.createElement(h.n,null,"history")),o.a.createElement(h.u,{primary:"History"})),o.a.createElement(h.s,{button:!0,onClick:function(){e.navigateTo("/statistics")}},o.a.createElement(h.t,null,o.a.createElement(h.n,null,"bar_chart")),o.a.createElement(h.u,{primary:"Statistics"})),o.a.createElement(h.s,{button:!0,onClick:function(){e.navigateTo("/settings")}},o.a.createElement(h.t,null,o.a.createElement(h.n,null,"settings")),o.a.createElement(h.u,{primary:"Settings"}))):o.a.createElement("div",{style:{padding:20}},o.a.createElement(h.E,{gutterBottom:!0},"You must be logged in."),o.a.createElement(h.c,{onClick:function(){e.navigateTo("/")},variant:"raised",color:"primary"},"Login")))))}}])&&me(n.prototype,a),r&&me(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");fe(e.prototype,t&&t.prototype),t&&fe(e,t)}(t,e),t}(a.Component),ye=Object(ue.a)(he),ge=function(e){return Object(c.auth)().user?o.a.createElement("div",null,o.a.createElement(ye,null),o.a.createElement(u.a,e)):o.a.createElement(s.a,{to:{pathname:"/",state:{from:e.location}}})},ve=function(){return o.a.createElement(f.a,{basename:"/food-journal"},o.a.createElement(m.a,null,o.a.createElement(u.a,{exact:!0,path:"/",component:w}),o.a.createElement(ge,{path:"/home",component:B}),o.a.createElement(ge,{path:"/statistics",component:ne}),o.a.createElement(ge,{path:"/history",component:ce}),o.a.createElement(ge,{path:"/settings",component:H}),o.a.createElement(u.a,{component:w})))};function be(e){return(be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Se(e,t){return!t||"object"!==be(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Ce=Object(i.createMuiTheme)({}),Me=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return Se(a,(n=a=Se(this,(e=ke(t)).call.apply(e,[this].concat(r))),a.state={},n))}var n,a,r;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){Object(c.initializeApp)({apiKey:"AIzaSyASrQ26OQZNaY9NKmEtOL1O8Uw_SdlAcNg",authDomain:"food-journal-6eb44.firebaseapp.com",databaseURL:"https://food-journal-6eb44.firebaseio.com",projectId:"food-journal-6eb44",storageBucket:"",messagingSenderId:"1056680813971"})}},{key:"render",value:function(){return o.a.createElement(i.MuiThemeProvider,{theme:Ce},o.a.createElement(ve,null))}}])&&we(n.prototype,a),r&&we(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Ee(e.prototype,t&&t.prototype),t&&Ee(e,t)}(t,e),t}(a.Component),Oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(o.a.createElement(Me,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/food-journal",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/food-journal","/service-worker.js");Oe?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):je(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):je(e)})}}()},187:function(e,t,n){},189:function(e,t,n){},193:function(e,t,n){},195:function(e,t,n){},197:function(e,t,n){},505:function(e,t,n){},520:function(e,t,n){},531:function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(530).enable(),window.Promise=n(528)),n(178),Object.assign=n(108)},532:function(e,t,n){n(531),e.exports=n(184)}},[[532,0,1]]]);
//# sourceMappingURL=main.512245b6.chunk.js.map