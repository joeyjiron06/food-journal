(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{186:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),l=(n(521),n(23)),c=n(18),u=n(536),s=n(535),f=n(112),p=n(534),m=n(17),h=n.n(m),d=n(4);n(507);function y(){var e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),end:new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59).getTime()}}function g(){var e,t,n,a,r=new Date;return{start:(e=r,t=(e=new Date(e)).getDay(),n=e.getDate()-t+(0===t?-6:1),(a=new Date(e.setDate(n))).setHours(0),a.setMinutes(0),a.setSeconds(0),a).getTime(),end:r.getTime()}}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){b(e,t,n[t])})}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void r(e)}n.done?a(i):Promise.resolve(i).then(l,c)}function l(e){i("next",e)}function c(e){i("throw",e)}l()})}}function w(e){return k.apply(this,arguments)}function k(){return(k=E(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.database)().user.child("meals").push(v({},t,{date:c.database.ServerValue.TIMESTAMP}));case 2:return e.next=4,j();case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function S(e){return C.apply(this,arguments)}function C(){return(C=E(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.database)().user.child("meals").child(t.id).update(t);case 2:return e.next=4,j();case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function O(){return(O=E(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.database)().user.child("meals").child(t.id).remove();case 2:return e.next=4,j();case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(){return M.apply(this,arguments)}function M(){return(M=E(h.a.mark(function e(){var t,n,a,r,o,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(c.auth)().user.id,e.next=3,R({userId:t,ascending:!1});case 3:return n=e.sent,a={meat:0,vegetarian:0,vegan:0,junkFood:0,dateOfAllVeganDay:0,junkFoodCountThisWeek:0,meatCountThisWeek:0,totalMeals:n.length,lastMeal:n[0]},r=g(),console.log("range",new Date(r.start),new Date(r.end)),n.forEach(function(e){"meat"===e.type&&a.meat++,"vegetarian"===e.type&&a.vegetarian++,"vegan"===e.type&&a.vegan++,"junk"===e.type&&a.junkFood++,e.date>=r.start&&e.date<=r.end&&("meat"===e.type&&a.meatCountThisWeek++,"junk"===e.type&&a.junkFoodCountThisWeek++)}),a.vegan=100*a.vegan/n.length,a.meat=100*a.meat/n.length,a.vegetarian=100*a.vegetarian/n.length,a.junkFood=100*a.junkFood/n.length,o=n.reduce(function(e,t){var n=new Date(t.date),a=e[e.length-1];return n.getDate()!==(a&&a.date.getDate())&&(e.push({date:n,meals:[]}),a=e[e.length-1]),a.meals.push(t),e},[]),(i=o.find(function(e){return e.meals.every(function(e){return"vegan"===e.type})}))&&(a.dateOfAllVeganDay=i.date.getTime()),e.next=17,Object(c.database)().ref(t).child("statistics").set(a);case 17:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function x(){return T.apply(this,arguments)}function T(){return(T=E(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,t){var n=Object(c.auth)().onAuthStateChanged(function(a){a?e(a):t(a),n()})});case 2:return t=e.sent,n={id:t.uid,photoUrl:t.photoURL,displayName:t.displayName},Object(c.auth)().user=n,Object(c.database)().user=Object(c.database)().ref(n.id),Object(c.database)().user.child("info").set(n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _(){return P.apply(this,arguments)}function P(){return(P=E(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.auth)().signInWithRedirect(new c.auth.FacebookAuthProvider);case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function N(){return A.apply(this,arguments)}function A(){return(A=E(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.auth)().log();case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function R(e){return F.apply(this,arguments)}function F(){return(F=E(h.a.mark(function e(t){var n,a,r,o,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,a=t.ascending,r=void 0===a||a,e.next=3,Object(c.database)().ref(n).child("meals").orderByChild("date").once("value");case 3:if(o=e.sent,i=[],o.forEach(function(e){i.push(v({},e.val(),{id:e.key}))}),r){e.next=8;break}return e.abrupt("return",i.reverse());case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function D(e){return W.apply(this,arguments)}function W(){return(W=E(h.a.mark(function e(t){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.database)().ref(t).child("info").once("value");case 2:return n=e.sent,e.abrupt("return",n.val());case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function B(e){return L.apply(this,arguments)}function L(){return(L=E(h.a.mark(function e(t){var n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.database)().ref(t).child("statistics").once("value");case 2:return n=e.sent,e.abrupt("return",n.val());case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function U(){return I.apply(this,arguments)}function I(){return(I=E(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://food-journal-6eb44.firebaseio.com/.json?shallow=true");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",Object.keys(n));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function V(){return J.apply(this,arguments)}function J(){return(J=E(h.a.mark(function e(){var t,n,a,r,o,i,l,u,s;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:t=e.sent,n=[],a=!0,r=!1,o=void 0,e.prev=7,i=t[Symbol.iterator]();case 9:if(a=(l=i.next()).done){e.next=24;break}return u=l.value,e.next=13,D(u);case 13:if(s=e.sent){e.next=17;break}return console.warn(u,"hasnt logged in for a while"),e.abrupt("continue",21);case 17:return e.next=19,B(u);case 19:s.stats=e.sent,u===Object(c.auth)().user.id?n.unshift(s):n.push(s);case 21:a=!0,e.next=9;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(7),r=!0,o=e.t0;case 30:e.prev=30,e.prev=31,a||null==i.return||i.return();case 33:if(e.prev=33,!r){e.next=36;break}throw o;case 36:return e.finish(33);case 37:return e.finish(30);case 38:return e.abrupt("return",n);case 39:case"end":return e.stop()}},e,this,[[7,26,30,38],[31,,33,37]])}))).apply(this,arguments)}function G(e){return(G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void r(e)}n.done?a(i):Promise.resolve(i).then(l,c)}function l(e){i("next",e)}function c(e){i("throw",e)}l()})}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function H(e,t){return!t||"object"!==G(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e){return(Q=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var K=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,Q(t).apply(this,arguments))}var n,a,o,i,l;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:(l=q(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:JSON.parse(localStorage.getItem("isReturningUser"))}),e.prev=1,e.next=4,x();case 4:return t=e.sent,e.next=7,j();case 7:localStorage.setItem("user",JSON.stringify(t)),n=this.props.location&&this.props.location.state&&this.props.location.state.from&&this.props.location.state.from.pathname||"/feeds",this.props.history.replace(n),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),this.setState({isLoading:!1});case 16:case"end":return e.stop()}},e,this,[[1,12]])})),function(){return l.apply(this,arguments)})},{key:"login",value:(i=q(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("isReturningUser",!0),_();case 2:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.isLoading;return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-page-background-container"},r.a.createElement("img",{className:"login-page-background-image",src:"img/loginpage1.jpg",alt:"login page"}),r.a.createElement("div",{className:"login-page-background-overlay"})),r.a.createElement("div",{className:"login-page-content"},r.a.createElement("div",{className:"login-page-title"},"Food Journal"),r.a.createElement("p",{className:"login-page-subtitle"},"keeping track of what you eat"),r.a.createElement(d.c,{variant:"contained",onClick:this.login,disabled:e},"Login with facebook"),e?r.a.createElement(d.d,{color:"secondary"}):null))}}])&&z(n.prototype,a),o&&z(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Y(e.prototype,t&&t.prototype),t&&Y(e,t)}(t,e),t}(a.Component);n(199),n(197);function Z(e){return(Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){X(e,t,n[t])})}return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ne(e,t){return!t||"object"!==Z(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var re=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return ne(a,(n=a=ne(this,(e=ae(t)).call.apply(e,[this].concat(o))),a.state={},a.handleTitleChanged=function(e){var t=e.target.value,n=$({},a.state.meal,{title:t});a.setState({meal:n})},a.handleMealTypeChanged=function(e){var t=e.target.value,n=$({},a.state.meal,{type:t});a.setState({meal:n})},a.handleConfirm=function(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void r(e)}n.done?a(i):Promise.resolve(i).then(l,c)}function l(e){i("next",e)}function c(e){i("throw",e)}l()})}}(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.meal,!t.isEditing){e.next=6;break}return e.next=4,S(n);case 4:e.next=8;break;case 6:return e.next=8,w(n);case 8:a.props.onConfirm(n);case 9:case"end":return e.stop()}},e,this)})),a.handleOnRemoveClicked=function(){a.setState({showRemoveConfirmDialog:!0})},a.handleCancelRemove=function(){a.setState({showRemoveConfirmDialog:!1})},a.handleConfirmRemove=function(){a.setState({showRemoveConfirmDialog:!1}),function(e){O.apply(this,arguments)}(a.state.meal),a.props.onRemove(a.props.meal)},n))}var n,a,o;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({meal:$({},this.props.meal),isEditing:!!this.props.meal})}},{key:"render",value:function(){var e=this.props.onCancel,t=this.state,n=t.meal,a=t.isEditing,o=t.showRemoveConfirmDialog,i=!!n.type&&!!n.title;return r.a.createElement(d.e,{open:!0},r.a.createElement(d.i,null,a?"Edit Meal":"Add Meal"),r.a.createElement(d.g,null,r.a.createElement("div",null,r.a.createElement(d.C,{label:"Name of meal",value:n.title||"",onChange:this.handleTitleChanged,margin:"normal",helperText:"required"})),a?r.a.createElement(d.c,{style:{position:"absolute",top:20,right:20},color:"secondary",onClick:this.handleOnRemoveClicked},"Remove"):null,r.a.createElement("form",{className:"edit-meal-type-form",autoComplete:"off"},r.a.createElement(d.l,{style:{minWidth:120}},r.a.createElement(d.q,{htmlFor:"edit-meal-type"},"Meal Type"),r.a.createElement(d.z,{value:n.type||"",onChange:this.handleMealTypeChanged,input:r.a.createElement(d.p,{name:"Meal Type",id:"edit-meal-type"})},r.a.createElement(d.x,{value:"junk"},"Junk food"),r.a.createElement(d.x,{value:"meat"},"Meat"),r.a.createElement(d.x,{value:"vegan"},"Vegan"),r.a.createElement(d.x,{value:"vegetarian"},"Vegetarian")),r.a.createElement(d.m,null,"required"))),r.a.createElement(d.f,null,r.a.createElement(d.c,{color:"primary",onClick:e},"Cancel"),r.a.createElement(d.c,{color:"primary",onClick:this.handleConfirm,disabled:!i},a?"Confirm":"Add"))),o?r.a.createElement(d.e,{open:!0},r.a.createElement(d.i,null,"Remove ".concat(n.title,"?")),r.a.createElement(d.g,null,r.a.createElement(d.h,null,"Are you sure you want to delete ",n.title,"?")),r.a.createElement(d.f,null,r.a.createElement(d.c,{onClick:this.handleCancelRemove,color:"primary"},"Cancel"),r.a.createElement(d.c,{onClick:this.handleConfirmRemove,color:"secondary"},"Remove"))):null)}}])&&te(n.prototype,a),o&&te(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");ee(e.prototype,t&&t.prototype),t&&ee(e,t)}(t,e),t}(a.Component);function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){ie(e,t,n[t])})}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e){var t=e.start,n=e.end,a=e.ascending,r=void 0===a||a;return Object(c.database)().user.child("meals").orderByChild("date").startAt(t).endAt(n).once("value").then(function(e){var t=[];return e.forEach(function(e){t.push(oe({},e.val(),{id:e.key}))}),r?t:t.reverse()})}function ce(e){return(ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function fe(e,t){return!t||"object"!==ce(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var me=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return fe(a,(n=a=fe(this,(e=pe(t)).call.apply(e,[this].concat(o))),a.state={showAddModal:!1,isFetching:!0,meals:null},a.handleAddMealClicked=function(){a.setState({showAddModal:!0})},a.handleCloseModal=function(){a.setState({showAddModal:!1,editMeal:null})},a.handleMealClicked=function(e){a.setState({showAddModal:!0,editMeal:e})},a.handleMealConfirmed=function(e){var t=(a.state.meals||[]).map(function(t){return t.id===e.id?e:t});e.id||(e.id=Date.now(),t.push(e)),a.setState({meals:t,showAddModal:!1})},a.handleRemoveMeal=function(e){var t=a.state.meals.filter(function(t){return t.id!==e.id});a.setState({meals:t,showAddModal:!1,editMeal:null})},n))}var n,a,o;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.mounted=!0,this.setState({isFetching:!0,isError:!1}),le(y()).then(function(t){e.mounted&&(console.log("got meals",t),e.setState({meals:t,isFetching:!1}))}).catch(function(t){e.mounted&&(e.setState({isFetching:!1,isError:!0}),console.error("error fetching meals",t))})}},{key:"UNSAFE_componentWillUnmount",value:function(){this.mounted=!0}},{key:"render",value:function(){var e=this,t=this.state,n=t.meals,a=t.showAddModal,o=t.editMeal,i=t.isFetching;return r.a.createElement("div",{className:"home-page"},r.a.createElement("div",{className:"home-page-content"},r.a.createElement(d.E,{variant:"display1",gutterBottom:!0},"Today"),i?r.a.createElement(d.d,{color:"secondary"}):r.a.createElement(d.r,null,n&&n.length?n.map(function(t){return r.a.createElement(d.s,{key:t.id,onClick:function(){e.handleMealClicked(t)}},r.a.createElement(d.u,{primary:t.title,secondary:t.type}))}):r.a.createElement(d.E,null,"You haven't added any meals today. Add some meals by clicking on the button below."))),r.a.createElement(d.y,{open:a},r.a.createElement(re,{meal:o,onConfirm:this.handleMealConfirmed,onCancel:this.handleCloseModal,onRemove:this.handleRemoveMeal})),r.a.createElement("div",{className:"home-page-add-button-container"},r.a.createElement(d.c,{variant:"extendedFab",onClick:this.handleAddMealClicked},r.a.createElement(d.n,{style:{marginRight:10}},"add"),"Add Meal")))}}])&&se(n.prototype,a),o&&se(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");ue(e.prototype,t&&t.prototype),t&&ue(e,t)}(t,e),t}(a.Component),he=Object(l.withStyles)(function(e){return{image:{width:40,height:40,borderRadius:"100%"}}})(function(e){var t=e.user,n=e.className,a=e.classes;return r.a.createElement("img",{className:"".concat(a.image," ").concat(n||""),src:t.photoUrl,alt:"avatar"})}),de=n(110),ye=n.n(de);var ge=function(e){var t=e.title,n=e.percentage,a=e.classes;return r.a.createElement("div",{className:a.stat},r.a.createElement(d.E,{className:a.statTitle},t),r.a.createElement("div",{className:a.statBarContainer},r.a.createElement("div",{className:a.statBar,style:{width:"".concat(n,"%")}})),r.a.createElement(d.E,{className:a.statPercentage},n.toFixed(0)+"%"))},ve=Object(l.withStyles)(function(e){return{root:{display:"flex",backgroundColor:"white",padding:20},userName:{fontSize:16},status:{opacity:.65},stats:{marginTop:20},stat:{display:"flex",marginBottom:20},rightSide:{marginLeft:20,width:"100%"},statBarContainer:{flexGrow:1},statTitle:{minWidth:80,fontWeight:"bold",opacity:.7},statBar:{height:20,backgroundColor:e.palette.secondary.light},statPercentage:{minWidth:40,textAlign:"right"},extraStats:{opacity:.7},totalMeals:{textAlign:"right"}}})(function(e){var t=e.user,n=e.classes,a=e.className,o=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["user","classes","className"]);return r.a.createElement("div",Object.assign({className:"".concat(n.root," ").concat(a||"")},o),r.a.createElement(he,{user:t}),r.a.createElement("div",{className:n.rightSide},r.a.createElement("div",{className:n.status},r.a.createElement(d.E,{className:n.userName},t.displayName),t.stats&&t.stats.lastMeal&&r.a.createElement(d.E,null,r.a.createElement("b",null,t.stats.lastMeal.title," \u2022 "),ye()(t.stats.lastMeal.date).fromNow())),r.a.createElement("div",{className:n.stats},r.a.createElement(ge,{title:"Vegan",percentage:t.stats.vegan,classes:n}),r.a.createElement(ge,{title:"Vegetarian",percentage:t.stats.vegetarian,classes:n}),r.a.createElement(ge,{title:"Meat",percentage:t.stats.meat,classes:n}),r.a.createElement(ge,{title:"Junk Food",percentage:t.stats.junkFood,classes:n})),r.a.createElement("div",{className:n.extraStats},t.stats.dateOfAllVeganDay&&r.a.createElement(d.E,{gutterBottom:!0},r.a.createElement("b",null,ye()(t.stats.dateOfAllVeganDay).fromNow()," "),"since last all vegan day"),r.a.createElement(d.E,{gutterBottom:!0},r.a.createElement("b",null,t.stats.junkFoodCountThisWeek||0," "),"junk food meals eaten this week"),r.a.createElement(d.E,{gutterBottom:!0},r.a.createElement("b",null,t.stats.meatCountThisWeek||0," "),"meat meals eaten this week"),r.a.createElement(d.E,{className:n.totalMeals},r.a.createElement("b",null,t.stats.totalMeals||0," "),"meals"))))});function be(e){return(be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void r(e)}n.done?a(i):Promise.resolve(i).then(l,c)}function l(e){i("next",e)}function c(e){i("throw",e)}l()})}}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){ke(e,t,n[t])})}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Oe(e,t){return!t||"object"!==be(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Me=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Oe(a,(n=a=Oe(this,(e=je(t)).call.apply(e,[this].concat(o))),a.state={isLoading:!0,users:null,error:!1,mealTitle:null},a.handleMealTypeSelected=function(e){var t=e.target.value;a.setState({meal:we({},a.state.meal,{type:t})})},a.handleMealTextChanged=function(e){var t=e.target.value,n=we({},a.state.meal,{title:t});a.setState({meal:n})},a.handleCreateMeal=Ee(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.meal,e.next=3,w(t);case 3:return e.next=5,a.fetchFeeds();case 5:a.setState({meal:null,users:a.state.users});case 6:case"end":return e.stop()}},e,this)})),n))}var n,a,o,i,l;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:(l=Ee(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchFeeds();case 2:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"fetchFeeds",value:(i=Ee(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V();case 3:t=e.sent,this.setState({isLoading:!1,users:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({isLoading:!1,error:!0});case 10:case"end":return e.stop()}},e,this,[[0,7]])})),function(){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.isLoading,o=n.users,i=n.error,l=n.meal;return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.userContainer},r.a.createElement(d.C,{className:t.textField,fullWidth:!0,placeholder:"What did you have to eat?",value:l&&l.title||"",onChange:this.handleMealTextChanged}),l&&l.title&&r.a.createElement("div",{className:t.mealActionContainer},r.a.createElement(d.l,{required:!0},r.a.createElement(d.q,{htmlFor:"mealtype-required"},"Meal Type"),r.a.createElement(d.z,{className:t.mealTypeSelect,value:l&&l.type||"",onChange:this.handleMealTypeSelected,name:"mealtype",inputProps:{id:"mealtype-required"}},r.a.createElement(d.x,{value:"vegan"},"Vegan"),r.a.createElement(d.x,{value:"vegetarian"},"Vegetarian"),r.a.createElement(d.x,{value:"meat"},"Meat"),r.a.createElement(d.x,{value:"junk"},"Junk Food")),r.a.createElement(d.m,null,"Required")),r.a.createElement(d.o,{color:"primary",disabled:!l||!l.type||!l.title,onClick:this.handleCreateMeal},r.a.createElement(d.n,null,"send")))),a?r.a.createElement(d.d,null):i?r.a.createElement("div",{onClick:function(){return e.fetchFeeds()}},"Error fetching feed. Tap to reload."):o.map(function(e){return r.a.createElement(ve,{key:e.id,user:e,className:t.userCard})}))}}])&&Ce(n.prototype,a),o&&Ce(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Se(e.prototype,t&&t.prototype),t&&Se(e,t)}(t,e),t}(a.Component),xe=Object(l.withStyles)(function(e){return{root:ke({maxWidth:600},e.breakpoints.up("sm"),{margin:"0 auto"}),userContainer:ke({display:"flex",alignItems:"center",padding:"20px 0"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"flex-start",padding:20}),userAvatar:{marginRight:20},userCard:{marginBottom:10},mealTypeButton:{minWidth:128},textField:{marginRight:10},mealActionContainer:{display:"flex",alignItems:"center"},mealTypeSelect:{minWidth:128}}})(Me),Te=n(538),_e=n.n(Te);n(195);function Pe(e){return(Pe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Re(e,t){return!t||"object"!==Pe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var De=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Re(a,(n=a=Re(this,(e=Fe(t)).call.apply(e,[this].concat(o))),a.state={goalValue:0,mealTypeButtonRef:null},a.handleGoalPercentageChanged=function(e,t){a.setGoalPercentageDebouncer(t),a.setState({goalPercentage:t})},a.handleMealTypeClick=function(e){a.setState({mealTypeButtonRef:e.target})},a.handleMealTypeMenuClose=function(){a.setState({mealTypeButtonRef:null})},a.handleMealTypeSelected=function(e){var t=e.target.getAttribute("value"),n=e.target.textContent;a.setState({mealTypeButtonRef:null,goalMealType:n}),a.goalRef.child("mealType").set(t)},n))}var n,a,o,i,l;return n=t,(a=[{key:"handleSignout",value:(i=h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),localStorage.clear(),window.location.href=window.location.href;case 9:case"end":return e.stop()}},e,this,[[0,5]])}),l=function(){var e=this,t=arguments;return new Promise(function(n,a){var r=i.apply(e,t);function o(e,t){try{var o=r[e](t),i=o.value}catch(e){return void a(e)}o.done?n(i):Promise.resolve(i).then(l,c)}function l(e){o("next",e)}function c(e){o("throw",e)}l()})},function(){return l.apply(this,arguments)})},{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.mounted=!0,this.goalRef=Object(c.database)().user.child("goal"),this.goalRef.once("value").then(function(t){if(e.mounted){var n=t.val();n&&e.setState({goalPercentage:n.percentage,goalMealType:n.mealType})}}).catch(function(t){e.mounted&&console.error("error fetching goal")}),this.setGoalPercentageDebouncer=function(e,t){if("number"!==typeof e)throw new Error("you must pass in a number");if("function"!==typeof t)throw new Error("you must pass in a function");var n,a=!1;function r(){a||(clearTimeout(n),n=setTimeout.apply(null,[t,e].concat(Array.prototype.slice.call(arguments))))}return r.destroy=function(){a||(clearTimeout(n),n=null,a=!0)},r}(500,function(t){t=Math.round(t),console.log("setting goal percentage to",t),e.goalRef.child("percentage").set(t)})}},{key:"UNSAFE_componentWillUnmount",value:function(){this.mounted=!1,this.setGoalPercentageDebouncer.destroy()}},{key:"render",value:function(){var e=this.state,t=e.goalPercentage,n=e.goalMealType,a=e.mealTypeButtonRef,o=this.props.classes;return r.a.createElement("div",{className:"settings-page"},r.a.createElement(d.E,{variant:"display1",gutterBottom:!0},"Settings"),r.a.createElement("div",null,r.a.createElement(d.E,null,"What percentage of a specific kind of meal type would you like as your goal?"),r.a.createElement("div",{className:o.goalContainer},r.a.createElement(_e.a,{style:{marginRight:20},value:t||0,onChange:this.handleGoalPercentageChanged}),r.a.createElement(d.E,{variant:"subheading",className:o.goalPercentage},"".concat(Math.round(t),"%")),r.a.createElement(d.c,{onClick:this.handleMealTypeClick,className:o.goalMealType},n||"Meal Type"),r.a.createElement(d.w,{anchorEl:a,open:Boolean(a),onClose:this.handleMealTypeMenuClose},r.a.createElement(d.x,{value:"junk",onClick:this.handleMealTypeSelected},"Junk Food"),r.a.createElement(d.x,{value:"meat",onClick:this.handleMealTypeSelected},"Meat"),r.a.createElement(d.x,{value:"vegan",onClick:this.handleMealTypeSelected},"Vegan"),r.a.createElement(d.x,{value:"vegetarian",onClick:this.handleMealTypeSelected},"Vegetarian")))),r.a.createElement("div",{className:"settings-page-link-container"},r.a.createElement("a",{className:"settings-page-link",href:"".concat(window.location.origin+"/food-journal","/privacy-policy.html")},"Privacy Policy"),r.a.createElement("a",{className:"settings-page-link",href:"".concat(window.location.origin+"/food-journal","/terms-of-service.html")},"Terms of Service")),r.a.createElement(d.c,{variant:"raised",color:"secondary",onClick:this.handleSignout},"Sign out"))}}])&&Ae(n.prototype,a),o&&Ae(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Ne(e.prototype,t&&t.prototype),t&&Ne(e,t)}(t,e),t}(a.Component),We=Object(l.withStyles)({goalContainer:{display:"flex",alignItems:"center"},goalPercentage:{marginRight:10},goalMealType:{flexShrink:0}})(De);n(191);function Be(e){return(Be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ie(e,t){return!t||"object"!==Be(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Je=function(e){var t=e.title,n=e.value;return r.a.createElement("div",{className:"stats-page-stat"},r.a.createElement(d.E,{className:"state-page-state-title"},t),r.a.createElement("div",{className:"stats-page-percentage-container"},r.a.createElement("div",{className:"stats-page-percentage-bar",style:{width:(n||0)+"%"}})),r.a.createElement(d.E,{style:{display:"inline"}},parseFloat((n||0).toFixed(1))+"%"))};var Ge=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return Ie(a,(n=a=Ie(this,(e=Ve(t)).call.apply(e,[this].concat(o))),a.state={stats:null,value:0},a.handleTabClicked=function(e,t){switch(t){case 0:a.loadMeals(y(),"today");break;case 1:a.loadMeals(g(),"week");break;case 2:a.loadMeals((n=new Date,{start:new Date(n.getFullYear(),n.getMonth()).getTime(),end:n.getTime()}),"month");break;case 3:a.loadMeals(function(){var e=new Date;return{start:new Date(e.getFullYear(),0).getTime(),end:e.getTime()}}(),"year",function(e,t){a.state.goal||Object(c.database)().user.child("goal").once("value").then(function(e){if(a.mounted){var n=e.val();if(n){var r=t.filter(function(e){return e.type===n.mealType}).length;console.log("numMealsTowardGoal",r,t.length,n);var o=Math.round((n.percentage/100*t.length-r)/(1-n.percentage/100));a.setState({numMealsToReachGoal:o,goal:n})}}}).catch(function(e){a.mounted&&console.error("error fetching goal",e)})});break;default:console.warn("unhandled value",t)}var n;a.setState({value:t})},n))}var n,a,o;return n=t,(a=[{key:"loadMeals",value:function(e,t,n){var a,r=this;this.cancelLoading&&(this.cancelLoading(),this.cancelLoading=null),a=this[t]?Promise.resolve(this[t]):le(e),this.setState({isLoading:!0,error:null,meals:null}),this.cancelLoading=function(e,t){var n=!1;return e.then(function(e){n||t(null,e)}).catch(function(e){n||t(e,null)}),function(){n=!0}}(a,function(e,a){console.log("got meals",a),r.setState({error:e,stats:function(e){var t=0,n=0,a=0,r=0;return(e=e||[]).forEach(function(e){"meat"===e.type&&t++,"vegetarian"===e.type&&n++,"vegan"===e.type&&a++,"junk"===e.type&&r++}),{meat:100*t/e.length,vegetarian:100*n/e.length,vegan:100*a/e.length,junkFood:100*r/e.length}}(a),isLoading:!1}),r[t]=a,"function"===typeof n&&n(e,a)})}},{key:"UNSAFE_componentWillMount",value:function(){this.mounted=!0,this.handleTabClicked(null,0)}},{key:"UNSAFE_componentWillUnMount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t=this.state.stats||{},n=this.state,a=n.value,o=n.goal,i=n.numMealsToReachGoal;return r.a.createElement("div",{className:"stats-page"},r.a.createElement(d.E,{variant:"display1",gutterBottom:!0},"Statistics"),r.a.createElement(d.B,{value:a,onChange:this.handleTabClicked,indicatorColor:"primary",textColor:"primary",scrollable:!0,scrollButtons:"auto"},r.a.createElement(d.A,{label:"Today"}),r.a.createElement(d.A,{label:"Week"}),r.a.createElement(d.A,{label:"Month"}),r.a.createElement(d.A,{label:"Year"})),r.a.createElement("div",{className:"stats-page-chart"},r.a.createElement(Je,{title:"Junk Food",value:t.junkFood}),r.a.createElement(Je,{title:"Meat",value:t.meat}),r.a.createElement(Je,{title:"Vegan",value:t.vegan}),r.a.createElement(Je,{title:"Vegetarian",value:t.vegetarian})),o&&void 0!==i?r.a.createElement(d.E,{gutterBottom:!0},"".concat(i," meals to reach ").concat(o.percentage,"% ").concat((e=o.mealType).charAt(0).toUpperCase()+e.slice(1).toLowerCase())):null)}}])&&Ue(n.prototype,a),o&&Ue(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Le(e.prototype,t&&t.prototype),t&&Le(e,t)}(t,e),t}(a.Component);n(189);function qe(e){return(qe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function He(e,t){return!t||"object"!==qe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Ke=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return He(a,(n=a=He(this,(e=Qe(t)).call.apply(e,[this].concat(o))),a.state={sections:null},a.handleMealClicked=function(e){return function(){a.setState({editMeal:e})}},a.handleCloseModal=function(){a.setState({editMeal:null})},a.handleMealConfirmed=function(e){var t=(a.state.sections||[]).map(function(t){return t.meals=t.meals.map(function(t){return t.id===e.id?e:t}),t});a.setState({sections:t,editMeal:null})},a.handleRemoveMeal=function(e){var t=(a.state.sections||[]).map(function(t){return t.meals=t.meals.filter(function(t){return t.id!==e.id}),t});a.setState({sections:t,editMeal:null})},n))}var n,a,o;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.mounted=!0,this.setState({sections:null,isLoading:!0,error:!1}),le({start:0,end:Date.now(),ascending:!1}).then(function(t){e.mounted&&(e.setMeals(t),e.setState({isLoading:!1}))}).catch(function(t){e.mounted&&e.setState({sections:null,isLoading:!1,error:!0})})}},{key:"setMeals",value:function(e){var t=[];e.forEach(function(e){var n=new Date(e.date),a=t[t.length-1];a&&n.getDate()===a.date.getDate()||(t.push({date:n,meals:[]}),a=t[t.length-1]),a.meals.push(e)}),this.setState({sections:t})}},{key:"UNSAFE_componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.sections,a=t.editMeal,o=t.isLoading,i=!!a;return r.a.createElement("div",{className:"history-page"},r.a.createElement(d.E,{variant:"display1",gutterBottom:!0},"Meal History"),r.a.createElement("div",null,o?r.a.createElement(d.d,{color:"secondary"}):r.a.createElement(d.r,{subheader:r.a.createElement("li",null)},n&&n.length?n.map(function(t){return r.a.createElement("li",{key:"".concat(t.date)},r.a.createElement("ul",null,r.a.createElement(d.v,{className:"section-header"},t.date.toLocaleDateString()),r.a.createElement(d.j,null),t.meals.map(function(t){return r.a.createElement(d.s,{key:t.id,onClick:e.handleMealClicked(t)},r.a.createElement(d.u,{primary:t.title,secondary:t.type}))})))}):null)),r.a.createElement(d.y,{open:i},r.a.createElement(re,{meal:a,onRemove:this.handleRemoveMeal,onConfirm:this.handleMealConfirmed,onCancel:this.handleCloseModal})))}}])&&ze(n.prototype,a),o&&ze(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Ye(e.prototype,t&&t.prototype),t&&Ye(e,t)}(t,e),t}(a.Component),Ze=n(537);function $e(e){return($e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function tt(e,t){return!t||"object"!==$e(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var at=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return tt(a,(n=a=tt(this,(e=nt(t)).call.apply(e,[this].concat(o))),a.state={openMenu:!1},n))}var n,a,o;return n=t,(a=[{key:"closeMenu",value:function(){this.setState({openMenu:!1})}},{key:"openMenu",value:function(){this.setState({openMenu:!0})}},{key:"navigateTo",value:function(e){this.closeMenu(),this.props.history.replace(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(d.a,{position:"static"},r.a.createElement(d.D,null,r.a.createElement(d.o,{color:"inherit","aria-label":"Menu",onClick:function(){e.openMenu()}},r.a.createElement(d.n,null,"menu")),r.a.createElement("div",null,"Food Journal")),r.a.createElement(d.k,{open:this.state.openMenu,onClose:function(){e.closeMenu()}},r.a.createElement("div",{tabIndex:0,role:"button",onClick:function(){}},Object(c.auth)().user?r.a.createElement(d.r,{component:"nav"},r.a.createElement(d.s,{dense:!0,button:!0},r.a.createElement(d.b,{alt:"Remy Sharp",src:Object(c.auth)().user.photoUrl}),r.a.createElement(d.u,{primary:Object(c.auth)().user.displayName})),r.a.createElement(d.s,{button:!0,onClick:function(){e.navigateTo("/home")}},r.a.createElement(d.t,null,r.a.createElement(d.n,null,"today")),r.a.createElement(d.u,{primary:"Today"})),r.a.createElement(d.s,{button:!0,onClick:function(){e.navigateTo("/history")}},r.a.createElement(d.t,null,r.a.createElement(d.n,null,"history")),r.a.createElement(d.u,{primary:"History"})),r.a.createElement(d.s,{button:!0,onClick:function(){e.navigateTo("/statistics")}},r.a.createElement(d.t,null,r.a.createElement(d.n,null,"bar_chart")),r.a.createElement(d.u,{primary:"Statistics"})),r.a.createElement(d.s,{button:!0,onClick:function(){e.navigateTo("/settings")}},r.a.createElement(d.t,null,r.a.createElement(d.n,null,"settings")),r.a.createElement(d.u,{primary:"Settings"}))):r.a.createElement("div",{style:{padding:20}},r.a.createElement(d.E,{gutterBottom:!0},"You must be logged in."),r.a.createElement(d.c,{onClick:function(){e.navigateTo("/")},variant:"raised",color:"primary"},"Login")))))}}])&&et(n.prototype,a),o&&et(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Xe(e.prototype,t&&t.prototype),t&&Xe(e,t)}(t,e),t}(a.Component),rt=Object(Ze.a)(at),ot=function(e){return Object(c.auth)().user?r.a.createElement("div",null,r.a.createElement(rt,null),r.a.createElement(f.a,e)):r.a.createElement(s.a,{to:{pathname:"/",state:{from:e.location}}})},it=function(){return r.a.createElement(u.a,null,r.a.createElement(p.a,null,r.a.createElement(f.a,{exact:!0,path:"/",component:K}),r.a.createElement(ot,{path:"/feeds",component:xe}),r.a.createElement(ot,{path:"/home",component:me}),r.a.createElement(ot,{path:"/statistics",component:Ge}),r.a.createElement(ot,{path:"/history",component:Ke}),r.a.createElement(ot,{path:"/settings",component:We}),r.a.createElement(f.a,{component:K})))};function lt(e){return(lt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function st(e,t){return!t||"object"!==lt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var pt=Object(l.createMuiTheme)({}),mt=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return st(a,(n=a=st(this,(e=ft(t)).call.apply(e,[this].concat(o))),a.state={},n))}var n,a,o;return n=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){Object(c.initializeApp)({apiKey:"AIzaSyASrQ26OQZNaY9NKmEtOL1O8Uw_SdlAcNg",authDomain:"food-journal-6eb44.firebaseapp.com",databaseURL:"https://food-journal-6eb44.firebaseio.com",projectId:"food-journal-6eb44",storageBucket:"",messagingSenderId:"1056680813971"})}},{key:"render",value:function(){return r.a.createElement(l.MuiThemeProvider,{theme:pt},r.a.createElement(it,null))}}])&&ut(n.prototype,a),o&&ut(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");ct(e.prototype,t&&t.prototype),t&&ct(e,t)}(t,e),t}(a.Component),ht=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function dt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(mt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/food-journal",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/food-journal","/service-worker.js");ht?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):dt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):dt(e)})}}()},189:function(e,t,n){},191:function(e,t,n){},195:function(e,t,n){},197:function(e,t,n){},199:function(e,t,n){},507:function(e,t,n){},521:function(e,t,n){},532:function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(531).enable(),window.Promise=n(529)),n(180),Object.assign=n(109)},533:function(e,t,n){n(532),e.exports=n(186)}},[[533,0,1]]]);
//# sourceMappingURL=main.b0f41490.chunk.js.map