{"version":3,"sources":["model/date.js","api/foodJournal.js","routes/login/index.js","components/avatar.js","components/userCard.js","routes/feeds.js","routes/settings.js","components/editMeal.js","routes/user.js","components/appBar.js","routes/index.js","App.js","registerServiceWorker.js","index.js","../config/polyfills.js"],"names":["dateRangeOfWeek","fromDate","day","diff","monday","now","Date","start","getDay","getDate","setDate","setHours","setMinutes","setSeconds","getTime","end","getUser","Object","index_cjs","user","addMeal","_x","_addMeal","apply","this","arguments","_callee","meal","regenerator_default","a","wrap","_context","prev","next","child","push","_objectSpread","date","ServerValue","TIMESTAMP","updateStats","stop","updateMeal","_x2","_updateMeal","_callee2","_context2","id","update","_callee3","_context3","remove","_updateStats","_callee4","userId","meals","stats","weekDateRange","days","allVeganDay","_context4","fetchMeals","ascending","sent","meat","vegetarian","vegan","junkFood","dateOfAllVeganDay","junkFoodCountThisWeek","meatCountThisWeek","totalMeals","length","lastMeal","forEach","type","arrangeByDays","find","every","ref","set","onAuthSuccess","authUser","uid","photoUrl","photoURL","displayName","onAuthStateChanged","_onAuthStateChanged","_callee5","_context5","Promise","resolve","reject","unsubscribe","abrupt","foodJournal_login","_login","_callee6","result","_context6","signInWithPopup","FacebookAuthProvider","signOut","_signOut","_callee7","_context7","deleteAccount","_deleteAccount","_callee8","_context8","reduce","fetchHistory","_x4","_fetchHistory","_callee9","_context9","_x5","_fetchMeals","_callee10","_ref","_ref$ascending","snapshot","_context10","orderByChild","once","mealSnapshot","val","key","reverse","fetchUser","_x6","_fetchUser","_callee11","_context11","fetchUserStats","_x7","_fetchUserStats","_callee12","_context12","fetchUserIds","_fetchUserIds","_callee13","res","userIdHash","_context13","fetch","json","keys","fetchUsersFeed","_fetchUsersFeed","_callee14","userIds","users","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_context14","undefined","Symbol","iterator","done","value","console","warn","unshift","t0","return","finish","login_Login","login","localStorage","setItem","_this","error","setState","isLoading","JSON","parse","getItem","stringify","pathname","props","location","state","from","history","replace","classes","react_default","createElement","className","root","backgroundContainer","backgroundImage","src","alt","backgroundOverlay","content","title","subtitle","index_es","variant","onClick","disabled","color","react","routes_login","styles","theme","width","height","display","justifyContent","alignItems","flexDirection","position","top","left","zIndex","objectFit","background","opacity","textAlign","fontSize","fontWeight","marginBottom","avatar","withRouter","image","borderRadius","flexShrink","concat","userCard_Stat","_ref2","percentage","stat","statTitle","statBarContainer","statBar","style","statPercentage","toFixed","userCard","backgroundColor","padding","userName","status","marginTop","rightSide","marginLeft","flexGrow","minWidth","palette","secondary","light","extraStats","other","_objectWithoutProperties","assign","moment_default","fromNow","gutterBottom","feeds_FeedsPage","mealTitle","handleMealTypeSelected","e","target","feeds_objectSpread","handleMealTextChanged","newMeal","handleCreateMeal","fetchFeeds","_this2","_this$state","userContainer","textField","fullWidth","placeholder","onChange","mealActionContainer","required","htmlFor","mealTypeSelect","name","inputProps","map","feeds","feeds_defineProperty","maxWidth","breakpoints","up","margin","down","userAvatar","marginRight","mealTypeButton","settings_SettingsPage","showDeleteAccountConfirmation","handleDeleteAccount","handleCancelDeleteAccount","handleDeleteAccountConfirmed","handleSignout","clear","window","reload","linkContainer","link","href","origin","button","open","settings","textDecoration","editMeal_EditMeal","valueOf","yesterday","subtract","twoDaysAgo","handleTitleChanged","event","editMeal_objectSpread","handleMealTypeChanged","handleMealDateChanged","handleConfirm","onConfirm","handleOnRemoveClicked","showRemoveConfirmDialog","handleCancelRemove","handleConfirmRemove","_x3","_removeMeal","removeMeal","onRemove","log","_this$props","onCancel","fullScreen","addButtonEnabled","label","right","form","input","toLocaleDateString","components_editMeal","breakpoint","user_UserPage","handleMealClicked","editMeal","handleCloseModal","handleMealConfirmed","loadData","handleRemoveMeal","match","params","allowEdit","mealListTitle","subheader","disableSticky","user_formatDay","mealListItem","primary","user_isToday","momentDate","startOf","endOf","isBetween","routes_user","paddingTop","appBar","borderBottom","logo","divider","routes_AuthenticatedRoute","Route","Redirect","to","routes","HashRouter","Switch","exact","path","component","src_App","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","react_dom_default","render","document","getElementById","URL","addEventListener","response","headers","get","indexOf","ready","unregister","checkValidServiceWorker","__webpack_require__","enable"],"mappings":"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","file":"static/js/main.71f85b88.chunk.js","sourcesContent":["// TODO remove me and use momemnt instead\n\nexport function dateRangeOfToday() {\n  const now = new Date();\n  const startOfToday = new Date(\n    now.getFullYear(),\n    now.getMonth(),\n    now.getDate()\n  ).getTime();\n\n  const endOfToday = new Date(\n    now.getFullYear(),\n    now.getMonth(),\n    now.getDate(),\n    23,\n    59,\n    59\n  ).getTime();\n\n  return {\n    start: startOfToday,\n    end: endOfToday\n  };\n}\n\nfunction getMonday(fromDate) {\n  fromDate = new Date(fromDate);\n  const day = fromDate.getDay();\n  const diff = fromDate.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\n  const monday = new Date(fromDate.setDate(diff));\n  monday.setHours(0);\n  monday.setMinutes(0);\n  monday.setSeconds(0);\n  return monday;\n}\n\nexport function dateRangeOfWeek() {\n  const now = new Date();\n  const prevMonday = getMonday(now);\n  return {\n    start: prevMonday.getTime(),\n    end: now.getTime()\n  };\n}\n\nexport function dateRangeOfMonth() {\n  const now = new Date();\n  const startOfMonth = new Date(now.getFullYear(), now.getMonth());\n  return {\n    start: startOfMonth.getTime(),\n    end: now.getTime()\n  };\n}\n\nexport function dateRangeOfYear() {\n  const now = new Date();\n  const startOfYear = new Date(now.getFullYear(), 0);\n  return {\n    start: startOfYear.getTime(),\n    end: now.getTime()\n  };\n}\n","import { database, auth } from 'firebase';\nimport { dateRangeOfWeek } from '../model/date';\n\n// USER API\nexport function getUser() {\n  return auth().user;\n}\n\nexport async function addMeal(meal) {\n  await database()\n    .user.child('meals')\n    .push({ ...meal, date: database.ServerValue.TIMESTAMP });\n\n  await updateStats();\n}\n\nexport async function updateMeal(meal) {\n  await database()\n    .user.child('meals')\n    .child(meal.id)\n    .update(meal);\n\n  await updateStats();\n}\n\nexport async function removeMeal(meal) {\n  await database()\n    .user.child('meals')\n    .child(meal.id)\n    .remove();\n\n  await updateStats();\n}\n\nexport async function updateStats() {\n  const userId = auth().user.id;\n  const meals = await fetchMeals({ userId, ascending: false });\n\n  const stats = {\n    meat: 0,\n    vegetarian: 0,\n    vegan: 0,\n    junkFood: 0,\n    dateOfAllVeganDay: 0,\n    junkFoodCountThisWeek: 0,\n    meatCountThisWeek: 0,\n    totalMeals: meals.length,\n    lastMeal: meals[0] || null\n  };\n\n  const weekDateRange = dateRangeOfWeek();\n  meals.forEach(meal => {\n    if (meal.type === 'meat') stats.meat++;\n    if (meal.type === 'vegetarian') stats.vegetarian++;\n    if (meal.type === 'vegan') stats.vegan++;\n    if (meal.type === 'junk') stats.junkFood++;\n\n    // this week\n    if (meal.date >= weekDateRange.start && meal.date <= weekDateRange.end) {\n      if (meal.type === 'meat') stats.meatCountThisWeek++;\n      if (meal.type === 'junk') stats.junkFoodCountThisWeek++;\n    }\n  });\n\n  // prevent divide by zero errors\n  if (meals.length) {\n    stats['vegan'] = (stats['vegan'] * 100) / meals.length;\n    stats['meat'] = (stats['meat'] * 100) / meals.length;\n    stats['vegetarian'] = (stats['vegetarian'] * 100) / meals.length;\n    stats['junkFood'] = (stats['junkFood'] * 100) / meals.length;\n  }\n\n  const days = arrangeByDays(meals);\n\n  const allVeganDay = days.find(day =>\n    day.meals.every(meal => meal.type === 'vegan')\n  );\n\n  if (allVeganDay) {\n    stats.dateOfAllVeganDay = allVeganDay.date.getTime();\n  }\n\n  await database()\n    .ref(userId)\n    .child('statistics')\n    .set(stats);\n}\n\nfunction onAuthSuccess(authUser) {\n  const user = {\n    id: authUser.uid,\n    photoUrl: authUser.photoURL,\n    displayName: authUser.displayName\n  };\n\n  auth().user = user;\n  database().user = database().ref(user.id);\n  database()\n    .user.child('info')\n    .set(user);\n\n  return user;\n}\n\nexport async function onAuthStateChanged() {\n  const authUser = await new Promise((resolve, reject) => {\n    const unsubscribe = auth().onAuthStateChanged(user => {\n      if (user) {\n        resolve(user);\n      } else {\n        reject(user);\n      }\n\n      unsubscribe();\n    });\n  });\n\n  return onAuthSuccess(authUser);\n}\n\nexport async function login() {\n  const result = await auth().signInWithPopup(new auth.FacebookAuthProvider());\n  const authUser = result.user;\n  return onAuthSuccess(authUser);\n}\n\nexport async function signOut() {\n  await auth().signOut();\n}\n\nexport async function deleteAccount() {\n  await database()\n    .ref(auth().user.id)\n    .set(null);\n}\n\n// OTHER APIs\n\nexport function arrangeByDays(meals) {\n  return meals.reduce((days, meal) => {\n    const date = new Date(meal.date);\n    let day = days[days.length - 1];\n    const mealDay = date.getDate();\n    const currentDay = day && day.date.getDate();\n\n    if (mealDay !== currentDay) {\n      days.push({\n        date: date,\n        meals: []\n      });\n      day = days[days.length - 1];\n    }\n\n    day.meals.push(meal);\n\n    return days;\n  }, []);\n}\n\nexport async function fetchHistory(userId) {\n  const meals = await fetchMeals({ userId, ascending: false });\n  return arrangeByDays(meals);\n}\n\nexport async function fetchMeals({ userId, ascending = true }) {\n  const snapshot = await database()\n    .ref(userId)\n    .child('meals')\n    .orderByChild('date')\n    .once('value');\n\n  const meals = [];\n  snapshot.forEach(mealSnapshot => {\n    meals.push({\n      ...mealSnapshot.val(),\n      id: mealSnapshot.key\n    });\n  });\n\n  if (!ascending) {\n    return meals.reverse();\n  }\n\n  return meals;\n}\n\nexport async function fetchUser(userId) {\n  const snapshot = await database()\n    .ref(userId)\n    .child('info')\n    .once('value');\n  return snapshot.val();\n}\n\nexport async function fetchUserStats(userId) {\n  const snapshot = await database()\n    .ref(userId)\n    .child('statistics')\n    .once('value');\n  return snapshot.val();\n}\n\nexport async function fetchUserIds() {\n  const res = await fetch(\n    'https://food-journal-6eb44.firebaseio.com/.json?shallow=true'\n  );\n  const userIdHash = await res.json();\n  return Object.keys(userIdHash);\n}\n\nexport async function fetchUsersFeed() {\n  const userIds = await fetchUserIds();\n  const users = [];\n\n  for (let userId of userIds) {\n    const user = await fetchUser(userId);\n\n    // for people who havent logged in\n    if (!user) {\n      console.warn(userId, 'hasnt logged in for a while');\n      continue;\n    }\n\n    user.stats = await fetchUserStats(userId);\n\n    // put us at the front of the list\n    if (userId === auth().user.id) {\n      users.unshift(user);\n    } else {\n      users.push(user);\n    }\n  }\n\n  return users;\n}\n","import React, { Component } from 'react';\nimport { Button, CircularProgress } from '@material-ui/core';\nimport './index.css';\nimport { onAuthStateChanged, login, updateStats } from '../../api/foodJournal';\nimport { withStyles } from '@material-ui/core/styles';\n\nclass Login extends Component {\n  async UNSAFE_componentWillMount() {\n    this.setState({\n      isLoading: JSON.parse(localStorage.getItem('isReturningUser'))\n    });\n\n    try {\n      const user = await onAuthStateChanged();\n      await this.onAuthSuccess(user);\n    } catch (e) {\n      console.error(e);\n      this.setState({\n        isLoading: false\n      });\n    }\n  }\n\n  login = async () => {\n    localStorage.setItem('isReturningUser', true);\n    try {\n      const user = await login();\n      await this.onAuthSuccess(user);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  async onAuthSuccess(user) {\n    await updateStats();\n\n    localStorage.setItem('user', JSON.stringify(user));\n\n    const pathname =\n      (this.props.location &&\n        this.props.location.state &&\n        this.props.location.state.from &&\n        this.props.location.state.from.pathname) ||\n      '/feeds';\n\n    this.props.history.replace(pathname);\n  }\n\n  render() {\n    const { isLoading } = this.state;\n    const { classes } = this.props;\n\n    return (\n      <div className={classes.root}>\n        <div className={classes.backgroundContainer}>\n          <img\n            className={classes.backgroundImage}\n            src='img/loginpage1.jpg'\n            alt='login page'\n          />\n          <div className={classes.backgroundOverlay} />\n        </div>\n\n        <div className={classes.content}>\n          <div className={classes.title}>Food Journal</div>\n          <p className={classes.subtitle}>keeping track of what you eat</p>\n          <Button variant='contained' onClick={this.login} disabled={isLoading}>\n            Login with facebook\n          </Button>\n\n          {isLoading ? <CircularProgress color='secondary' /> : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst styles = theme => ({\n  root: {\n    width: '100vw',\n    height: '100vh',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    flexDirection: 'column',\n    position: 'relative',\n    color: 'white'\n  },\n\n  backgroundContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    zIndex: -1\n  },\n\n  backgroundImage: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover'\n  },\n\n  backgroundOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    background: 'black',\n    opacity: 0.6\n  },\n\n  content: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    textAlign: 'center'\n  },\n\n  title: {\n    fontSize: 42,\n    fontWeight: 'bold'\n  },\n\n  subtitle: {\n    marginBottom: 40\n  }\n});\n\nexport default withStyles(styles)(Login);\n","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router';\n\nconst Avatar = ({ user, className, history, classes, onClick }) => (\n  <img\n    className={`${classes.image} ${className || ''}`}\n    src={user.photoUrl}\n    alt='avatar'\n    onClick={() => {\n      if (onClick) {\n        onClick();\n      } else {\n        history.push(`/user/${user.id}`);\n      }\n    }}\n  />\n);\n\nconst styles = theme => ({\n  image: {\n    width: 40,\n    height: 40,\n    borderRadius: '100%',\n    flexShrink: 0\n  }\n});\n\nexport default withRouter(withStyles(styles)(Avatar));\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport Avatar from './avatar';\nimport moment from 'moment';\n\nconst UserCard = ({ user, stats, classes, className, ...other }) => (\n  <div className={`${classes.root} ${className || ''}`} {...other}>\n    <Avatar user={user} />\n\n    <div className={classes.rightSide}>\n      <div className={classes.status}>\n        <Typography className={classes.userName}>{user.displayName}</Typography>\n        {stats &&\n          stats.lastMeal && (\n            <Typography>\n              <b>{stats.lastMeal.title} • </b>\n              {moment(stats.lastMeal.date).fromNow()}\n            </Typography>\n          )}\n      </div>\n\n      <div className={classes.stats}>\n        <Stat title='Vegan' percentage={stats.vegan} classes={classes} />\n        <Stat\n          title='Vegetarian'\n          percentage={stats.vegetarian}\n          classes={classes}\n        />\n        <Stat title='Meat' percentage={stats.meat} classes={classes} />\n        <Stat title='Junk Food' percentage={stats.junkFood} classes={classes} />\n      </div>\n\n      <div className={classes.extraStats}>\n        {stats.dateOfAllVeganDay && (\n          <Typography gutterBottom>\n            <b>{moment(stats.dateOfAllVeganDay).fromNow()} </b>\n            since last all vegan day\n          </Typography>\n        )}\n\n        <Typography gutterBottom>\n          <b>{stats.junkFoodCountThisWeek || 0} </b>\n          junk food meals eaten this week\n        </Typography>\n\n        <Typography gutterBottom>\n          <b>{stats.meatCountThisWeek || 0} </b>\n          meat meals eaten this week\n        </Typography>\n\n        <Typography className={classes.totalMeals}>\n          <b>{stats.totalMeals || 0} </b>\n          meals\n        </Typography>\n      </div>\n    </div>\n  </div>\n);\n\nUserCard.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    displayName: PropTypes.string.isRequired,\n    photoUrl: PropTypes.string.isRequired\n  }),\n  stats: PropTypes.shape({\n    meat: PropTypes.number.isRequired,\n    vegetarian: PropTypes.number.isRequired,\n    vegan: PropTypes.number.isRequired,\n    junkFood: PropTypes.number.isRequired,\n    dateOfAllVeganDay: PropTypes.number.isRequired,\n    junkFoodCountThisWeek: PropTypes.number.isRequired,\n    meatCountThisWeek: PropTypes.number.isRequired,\n    totalMeals: PropTypes.number.isRequired,\n    lastMeal: PropTypes.shape({\n      id: PropTypes.string,\n      title: PropTypes.string,\n      data: PropTypes.number\n    })\n  }).isRequired\n};\n\nconst Stat = ({ title, percentage, classes }) => (\n  <div className={classes.stat}>\n    <Typography className={classes.statTitle}>{title}</Typography>\n    <div className={classes.statBarContainer}>\n      <div\n        className={classes.statBar}\n        style={{\n          width: `${percentage}%`\n        }}\n      />\n    </div>\n\n    <Typography className={classes.statPercentage}>\n      {percentage.toFixed(0) + '%'}\n    </Typography>\n  </div>\n);\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    backgroundColor: 'white',\n    padding: 20\n  },\n  userName: {\n    fontSize: 16\n  },\n  status: {\n    opacity: 0.65\n  },\n  stats: {\n    marginTop: 20\n  },\n  stat: {\n    display: 'flex',\n    marginBottom: 20\n  },\n  rightSide: {\n    marginLeft: 20,\n    width: '100%'\n  },\n  statBarContainer: {\n    flexGrow: 1\n  },\n  statTitle: {\n    minWidth: 80,\n    fontWeight: 'bold',\n    opacity: 0.7\n  },\n  statBar: {\n    height: 20,\n    backgroundColor: theme.palette.secondary.light\n  },\n  statPercentage: {\n    minWidth: 40,\n    textAlign: 'right'\n  },\n  extraStats: {\n    opacity: 0.7\n  },\n  totalMeals: {\n    textAlign: 'right'\n  }\n});\n\nexport default withStyles(styles)(UserCard);\n","import React, { Component } from 'react';\nimport {\n  CircularProgress,\n  TextField,\n  MenuItem,\n  Icon,\n  IconButton,\n  FormControl,\n  InputLabel,\n  Select,\n  FormHelperText\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { fetchUsersFeed, addMeal } from '../api/foodJournal';\nimport UserCard from '../components/userCard';\n\nclass FeedsPage extends Component {\n  state = {\n    isLoading: true,\n    users: null,\n    error: false,\n    mealTitle: null\n  };\n\n  async UNSAFE_componentWillMount() {\n    await this.fetchFeeds();\n  }\n\n  async fetchFeeds() {\n    try {\n      const users = await fetchUsersFeed();\n      this.setState({\n        isLoading: false,\n        users\n      });\n    } catch (e) {\n      this.setState({\n        isLoading: false,\n        error: true\n      });\n    }\n  }\n\n  handleMealTypeSelected = e => {\n    const { value } = e.target;\n    this.setState({\n      meal: {\n        ...this.state.meal,\n        type: value\n      }\n    });\n  };\n\n  handleMealTextChanged = e => {\n    const value = e.target.value;\n    const newMeal = {\n      ...this.state.meal,\n      title: value\n    };\n\n    this.setState({\n      meal: newMeal\n    });\n  };\n\n  handleCreateMeal = async () => {\n    const { meal } = this.state;\n    await addMeal(meal);\n    await this.fetchFeeds();\n    this.setState({ meal: null, users: this.state.users });\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { isLoading, users, error, meal } = this.state;\n\n    return (\n      <div className={classes.root}>\n        <div className={classes.userContainer}>\n          <TextField\n            className={classes.textField}\n            fullWidth={true}\n            placeholder='What did you have to eat?'\n            value={(meal && meal.title) || ''}\n            onChange={this.handleMealTextChanged}\n          />\n\n          {meal &&\n            meal.title && (\n              <div className={classes.mealActionContainer}>\n                <FormControl required>\n                  <InputLabel htmlFor='mealtype-required'>Meal Type</InputLabel>\n\n                  <Select\n                    className={classes.mealTypeSelect}\n                    value={(meal && meal.type) || ''}\n                    onChange={this.handleMealTypeSelected}\n                    name='mealtype'\n                    inputProps={{\n                      id: 'mealtype-required'\n                    }}\n                  >\n                    <MenuItem value='vegan'>Vegan</MenuItem>\n                    <MenuItem value='vegetarian'>Vegetarian</MenuItem>\n                    <MenuItem value='meat'>Meat</MenuItem>\n                    <MenuItem value='junk'>Junk Food</MenuItem>\n                  </Select>\n                  <FormHelperText>Required</FormHelperText>\n                </FormControl>\n\n                <IconButton\n                  color='primary'\n                  disabled={!meal || !meal.type || !meal.title}\n                  onClick={this.handleCreateMeal}\n                >\n                  <Icon>send</Icon>\n                </IconButton>\n              </div>\n            )}\n        </div>\n\n        {(() => {\n          if (isLoading) {\n            return <CircularProgress />;\n          }\n\n          if (error) {\n            return (\n              <div onClick={() => this.fetchFeeds()}>\n                Error fetching feed. Tap to reload.\n              </div>\n            );\n          }\n\n          return users.map(user => (\n            <UserCard\n              key={user.id}\n              user={user}\n              stats={user.stats}\n              className={classes.userCard}\n            />\n          ));\n        })()}\n      </div>\n    );\n  }\n}\n\nconst styles = theme => ({\n  root: {\n    maxWidth: 600,\n    [theme.breakpoints.up('sm')]: {\n      margin: '0 auto'\n    }\n  },\n  userContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: '20px 0',\n    [theme.breakpoints.down('sm')]: {\n      flexDirection: 'column',\n      alignItems: 'flex-start',\n      padding: 20\n    }\n  },\n  userAvatar: {\n    marginRight: 20\n  },\n  userCard: {\n    marginBottom: 10\n  },\n  mealTypeButton: {\n    minWidth: 128\n  },\n  textField: {\n    marginRight: 10\n  },\n  mealActionContainer: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  mealTypeSelect: {\n    minWidth: 128\n  }\n});\n\nexport default withStyles(styles)(FeedsPage);\n","import React, { Component } from 'react';\nimport {\n  Button,\n  Typography,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { signOut, deleteAccount } from '../api/foodJournal';\n\nclass SettingsPage extends Component {\n  state = {\n    showDeleteAccountConfirmation: false\n  };\n\n  async handleSignout() {\n    try {\n      await signOut();\n    } catch (e) {\n      console.error('error signing out', e);\n    } finally {\n      localStorage.clear();\n      window.location.reload(); // refresh the page\n    }\n  }\n\n  handleDeleteAccount = () => {\n    this.setState({\n      showDeleteAccountConfirmation: true\n    });\n  };\n\n  handleCancelDeleteAccount = () => {\n    this.setState({\n      showDeleteAccountConfirmation: false\n    });\n  };\n\n  handleDeleteAccountConfirmed = async () => {\n    await deleteAccount();\n    await this.handleSignout();\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { showDeleteAccountConfirmation } = this.state;\n\n    return (\n      <div className={classes.root}>\n        <Typography variant='display1' gutterBottom>\n          Settings\n        </Typography>\n\n        <Typography gutterBottom>\n          Thank you for using Food Journal. If you find a bug click on the\n          github link below and submit an issue.\n        </Typography>\n\n        <div className={classes.linkContainer}>\n          <a\n            className={classes.link}\n            href={'https://github.com/joeyjiron06/food-journal'}\n          >\n            Github\n          </a>\n\n          <a\n            className={classes.link}\n            href={`${window.location.origin +\n              (process.env.PUBLIC_URL || '')}/privacy-policy.html`}\n          >\n            Privacy Policy\n          </a>\n\n          <a\n            className={classes.link}\n            href={`${window.location.origin +\n              (process.env.PUBLIC_URL || '')}/terms-of-service.html`}\n          >\n            Terms of Service\n          </a>\n        </div>\n\n        <Button\n          className={classes.button}\n          variant='raised'\n          color='secondary'\n          onClick={this.handleSignout}\n        >\n          Sign out\n        </Button>\n\n        <Button\n          variant='raised'\n          color='secondary'\n          className={classes.button}\n          onClick={this.handleDeleteAccount}\n        >\n          Delete Account\n        </Button>\n\n        {showDeleteAccountConfirmation && (\n          <Dialog open={true}>\n            <DialogTitle>Delete Account</DialogTitle>\n            <DialogContent>\n              <DialogContentText>\n                Are you sure you want to delete your account? This action cannot\n                be undone.\n              </DialogContentText>\n            </DialogContent>\n\n            <DialogActions>\n              <Button onClick={this.handleCancelDeleteAccount}>Cancel</Button>\n              <Button\n                color='secondary'\n                onClick={this.handleDeleteAccountConfirmed}\n              >\n                Delete\n              </Button>\n            </DialogActions>\n          </Dialog>\n        )}\n      </div>\n    );\n  }\n}\n\nconst styles = {\n  root: {\n    padding: '30px 20px'\n  },\n\n  link: {\n    color: '#3f51b5',\n    textDecoration: 'underline',\n    marginRight: 10\n  },\n\n  linkContainer: {\n    marginBottom: 20\n  },\n  button: {\n    marginRight: 20\n  }\n};\n\nexport default withStyles(styles)(SettingsPage);\n","import React, { Component } from 'react';\nimport {\n  Button,\n  Dialog,\n  DialogContent,\n  DialogActions,\n  DialogTitle,\n  DialogContentText,\n  TextField,\n  FormControl,\n  InputLabel,\n  Input,\n  Select,\n  MenuItem,\n  withMobileDialog,\n  IconButton,\n  Icon\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { updateMeal, removeMeal } from '../api/foodJournal';\nimport moment from 'moment';\n\nclass EditMeal extends Component {\n  state = {\n    now: moment(new Date()).valueOf(),\n    yesterday: moment(new Date())\n      .subtract(1, 'day')\n      .valueOf(),\n    twoDaysAgo: moment(new Date())\n      .subtract(2, 'day')\n      .valueOf()\n  };\n\n  UNSAFE_componentWillMount() {\n    // copy the passed in meal for editing, or create a new one\n    this.setState({\n      meal: { ...this.props.meal }\n    });\n\n    console.log('state', this.state);\n  }\n\n  handleTitleChanged = event => {\n    const title = event.target.value;\n    const meal = { ...this.state.meal, title };\n    this.setState({ meal });\n  };\n  handleMealTypeChanged = event => {\n    const type = event.target.value;\n    const meal = { ...this.state.meal, type };\n    this.setState({ meal });\n  };\n  handleMealDateChanged = event => {\n    const date = event.target.value;\n    const meal = { ...this.state.meal, date };\n    this.setState({ meal });\n  };\n\n  handleConfirm = async () => {\n    const { meal } = this.state;\n\n    await updateMeal(meal);\n    this.props.onConfirm(meal);\n  };\n\n  handleOnRemoveClicked = () => {\n    this.setState({\n      showRemoveConfirmDialog: true\n    });\n  };\n\n  handleCancelRemove = () => {\n    this.setState({\n      showRemoveConfirmDialog: false\n    });\n  };\n  handleConfirmRemove = () => {\n    this.setState({\n      showRemoveConfirmDialog: false\n    });\n    removeMeal(this.state.meal);\n    this.props.onRemove(this.props.meal);\n  };\n\n  render() {\n    const { onCancel, fullScreen, classes } = this.props;\n    const {\n      meal,\n      showRemoveConfirmDialog,\n      now,\n      yesterday,\n      twoDaysAgo\n    } = this.state;\n    const addButtonEnabled = !!meal.type && !!meal.title;\n\n    return (\n      <Dialog open={true} fullScreen={fullScreen}>\n        <DialogTitle>Edit Meal</DialogTitle>\n\n        <DialogContent>\n          <DialogContentText>\n            Edit your meal below. All fields are required.\n          </DialogContentText>\n\n          <TextField\n            fullWidth={true}\n            label='Name of meal'\n            value={meal.title || ''}\n            onChange={this.handleTitleChanged}\n            margin='normal'\n          />\n\n          <IconButton\n            style={{\n              position: 'absolute',\n              top: 20,\n              right: 20\n            }}\n            color='secondary'\n            onClick={this.handleOnRemoveClicked}\n          >\n            <Icon>delete</Icon>\n          </IconButton>\n\n          <FormControl className={classes.form}>\n            <InputLabel htmlFor='edit-meal-type'>Meal Type</InputLabel>\n            <Select\n              value={meal.type || ''}\n              onChange={this.handleMealTypeChanged}\n              input={<Input name='Meal Type' id='edit-meal-type' />}\n            >\n              <MenuItem value={'junk'}>Junk food</MenuItem>\n              <MenuItem value={'meat'}>Meat</MenuItem>\n              <MenuItem value={'vegan'}>Vegan</MenuItem>\n              <MenuItem value={'vegetarian'}>Vegetarian</MenuItem>\n            </Select>\n          </FormControl>\n\n          <FormControl className={classes.form}>\n            <InputLabel htmlFor='edit-meal-date'>Date</InputLabel>\n            <Select\n              value={meal.date || ''}\n              onChange={this.handleMealDateChanged}\n              input={<Input name='Date' id='edit-meal-date' />}\n            >\n              <MenuItem value={now}>Today</MenuItem>\n              <MenuItem value={yesterday}>Yesterday</MenuItem>\n              <MenuItem value={twoDaysAgo}>2 days ago</MenuItem>\n              {/* TODO: other. allow user to type in some other date */}\n              <MenuItem value={this.props.meal.date}>\n                {new Date(this.props.meal.date).toLocaleDateString()}\n              </MenuItem>\n            </Select>\n          </FormControl>\n        </DialogContent>\n\n        <DialogActions>\n          <Button color='primary' onClick={onCancel}>\n            Cancel\n          </Button>\n          <Button\n            color='primary'\n            onClick={this.handleConfirm}\n            disabled={!addButtonEnabled}\n          >\n            Confirm\n          </Button>\n        </DialogActions>\n\n        {showRemoveConfirmDialog ? (\n          <Dialog open={true}>\n            <DialogTitle>{`Remove ${meal.title}?`}</DialogTitle>\n            <DialogContent>\n              <DialogContentText>\n                Are you sure you want to delete {meal.title}?\n              </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={this.handleCancelRemove} color='primary'>\n                Cancel\n              </Button>\n              <Button onClick={this.handleConfirmRemove} color='secondary'>\n                Remove\n              </Button>\n            </DialogActions>\n          </Dialog>\n        ) : null}\n      </Dialog>\n    );\n  }\n}\n\nconst styles = theme => ({\n  root: {},\n  form: {\n    display: 'inline-block',\n    marginRight: 20,\n    marginTop: 20,\n    minWidth: 120\n  }\n});\n\nexport default withMobileDialog({ breakpoint: 'xs' })(\n  withStyles(styles)(EditMeal)\n);\n","import React, { Component } from 'react';\nimport {\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n  ListSubheader,\n  CircularProgress,\n  ListItemSecondaryAction,\n  IconButton,\n  Icon\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  fetchHistory,\n  fetchUser,\n  fetchUserStats,\n  getUser\n} from '../api/foodJournal';\nimport EditMeal from '../components/editMeal';\nimport UserCard from '../components/userCard';\nimport moment from 'moment';\n\nclass UserPage extends Component {\n  state = {\n    days: null,\n    user: null,\n    stats: null,\n    isLoading: true,\n    error: false\n  };\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  async loadData() {\n    const { match } = this.props;\n    const userId = match && match.params.id;\n    // const recipeFromState = location && location.state && location.state.recipe;\n\n    try {\n      const user = await fetchUser(userId);\n      const stats = await fetchUserStats(userId);\n      const days = await fetchHistory(userId);\n\n      this.setState({\n        days,\n        user,\n        stats,\n        isLoading: false\n      });\n    } catch (e) {\n      console.error(e);\n      this.setState({\n        error: e,\n        isLoading: false\n      });\n    }\n  }\n\n  handleMealClicked = meal => () => {\n    this.setState({\n      editMeal: meal\n    });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ editMeal: null });\n  };\n\n  handleMealConfirmed = async meal => {\n    this.handleCloseModal();\n    this.loadData();\n  };\n\n  handleRemoveMeal = meal => {\n    this.handleCloseModal();\n    this.loadData();\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { days, user, stats, editMeal, isLoading, error } = this.state;\n    const allowEdit = user && user.id === getUser().id;\n\n    return (\n      <div className={classes.root}>\n        <div>\n          {(() => {\n            if (isLoading) {\n              return <CircularProgress color='secondary' />;\n            }\n\n            if (error) {\n              return <Typography>Error fetching meals.</Typography>;\n            }\n\n            if (!days.length) {\n              return <Typography>No meals added!</Typography>;\n            }\n\n            return (\n              <div>\n                <UserCard user={user} stats={stats} />\n\n                <Typography\n                  variant='headline'\n                  className={classes.mealListTitle}\n                >\n                  Meals\n                </Typography>\n\n                <List subheader={<li />}>\n                  {days.map(day => (\n                    <li key={`${day.date}`}>\n                      <ul>\n                        <ListSubheader disableSticky={true}>\n                          {formatDay(day.date)}\n                        </ListSubheader>\n\n                        {day.meals.map(meal => (\n                          <ListItem\n                            key={meal.id}\n                            className={classes.mealListItem}\n                          >\n                            <ListItemText\n                              primary={meal.title}\n                              secondary={\n                                isToday(meal.date)\n                                  ? `${moment(meal.date).fromNow()} • ${\n                                      meal.type\n                                    }`\n                                  : meal.type\n                              }\n                            />\n\n                            {allowEdit && (\n                              <ListItemSecondaryAction>\n                                <IconButton\n                                  onClick={this.handleMealClicked(meal)}\n                                >\n                                  <Icon>edit</Icon>\n                                </IconButton>\n                              </ListItemSecondaryAction>\n                            )}\n                          </ListItem>\n                        ))}\n                      </ul>\n                    </li>\n                  ))}\n                </List>\n              </div>\n            );\n          })()}\n        </div>\n\n        {!!editMeal && (\n          <EditMeal\n            meal={editMeal}\n            onRemove={this.handleRemoveMeal}\n            onConfirm={this.handleMealConfirmed}\n            onCancel={this.handleCloseModal}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst isToday = date => {\n  const momentDate = moment(date);\n  const start = moment().startOf('day');\n  const end = moment().endOf('day');\n  return momentDate.isBetween(start, end);\n};\n\nconst formatDay = date => {\n  if (isToday(date)) {\n    return 'Today';\n  }\n\n  const momentDate = moment(date);\n  let start = moment()\n    .startOf('day')\n    .subtract(1, 'day');\n  let end = moment()\n    .endOf('day')\n    .subtract(1, 'day');\n\n  if (momentDate.isBetween(start, end)) {\n    return 'Yesterday';\n  }\n\n  start = start.subtract(1, 'day');\n  end = end.subtract(1, 'day');\n\n  if (momentDate.isBetween(start, end)) {\n    return '2 days ago';\n  }\n\n  return date.toLocaleDateString();\n};\n\nconst styles = theme => ({\n  root: {\n    maxWidth: 600,\n    margin: '0 auto',\n    paddingTop: 20\n  },\n  mealListTitle: {\n    padding: '20px 16px'\n  },\n  mealListItem: {\n    backgroundColor: 'white'\n  }\n});\n\nexport default withStyles(styles)(UserPage);\n","import React from 'react';\nimport { withStyles } from '@material-ui/core';\nimport { withRouter } from 'react-router';\nimport Avatar from './avatar';\nimport { getUser } from '../api/foodJournal';\n\nconst AppBar = ({ history, classes }) => (\n  <div className={classes.root}>\n    <div className={classes.content}>\n      <div\n        onClick={() => {\n          history.push('/feeds');\n        }}\n      >\n        <img className={classes.logo} src='img/logo.png' alt='logo' />\n        <div className={classes.divider} />\n        <img className={classes.logo} src='img/logo-text.png' alt='logo' />\n      </div>\n      {/* <Typography variant='title'>Food Journal</Typography> */}\n\n      <Avatar\n        user={getUser()}\n        onClick={() => {\n          history.push('/settings');\n        }}\n      />\n    </div>\n  </div>\n);\n\nconst styles = theme => ({\n  root: {\n    background: 'white',\n    padding: '10px 20px',\n    borderBottom: 'solid 1px rgba(0,0,0,0.1)',\n    position: 'sticky',\n    top: 0,\n    zIndex: 100\n  },\n  logo: {\n    height: 28\n  },\n  divider: {\n    display: 'inline-block',\n    width: 1,\n    height: 30,\n    margin: '0 10px',\n    background: 'black',\n    opacity: 0.2\n  },\n  content: {\n    maxWidth: 600,\n    margin: '0 auto',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  }\n});\n\nexport default withStyles(styles)(withRouter(AppBar));\n","import React from 'react';\nimport {\n  HashRouter as Router,\n  Route,\n  Redirect,\n  Switch\n} from 'react-router-dom';\nimport LoginPage from './login';\nimport FeedsPage from './feeds';\nimport SettingsPage from './settings';\nimport UserPage from './user';\nimport AppBar from '../components/appBar';\nimport { auth } from 'firebase';\n\nconst AuthenticatedRoute = props => {\n  if (!auth().user) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/',\n          state: { from: props.location }\n        }}\n      />\n    );\n  }\n\n  return (\n    <div>\n      <AppBar />\n      <Route {...props} />\n    </div>\n  );\n};\n\nexport default () => (\n  <Router>\n    <Switch>\n      <Route exact path='/' component={LoginPage} />\n      <AuthenticatedRoute path='/feeds' component={FeedsPage} />\n      <AuthenticatedRoute path='/settings' component={SettingsPage} />\n      <AuthenticatedRoute path='/user/:id' component={UserPage} />\n      {/* no match just redirect to login page */}\n      <Route component={LoginPage} />\n    </Switch>\n  </Router>\n);\n","import React, { Component } from 'react';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport { initializeApp } from 'firebase';\nimport Routes from './routes';\n\nconst theme = createMuiTheme({});\n\nclass App extends Component {\n  state = {};\n\n  UNSAFE_componentWillMount() {\n    initializeApp({\n      apiKey: 'AIzaSyASrQ26OQZNaY9NKmEtOL1O8Uw_SdlAcNg',\n      authDomain: 'food-journal-6eb44.firebaseapp.com',\n      databaseURL: 'https://food-journal-6eb44.firebaseio.com',\n      projectId: 'food-journal-6eb44',\n      storageBucket: '',\n      messagingSenderId: '1056680813971'\n    });\n  }\n\n  render() {\n    return (\n      <MuiThemeProvider theme={theme}>\n        <Routes />\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  // if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n  // TODO change me back\n  if ('serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n","'use strict';\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  require('promise/lib/rejection-tracking').enable();\n  window.Promise = require('promise/lib/es6-extensions.js');\n}\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign');\n\n// In tests, polyfill requestAnimationFrame since jsdom doesn't provide it yet.\n// We don't polyfill it in the browser--this is user's responsibility.\nif (process.env.NODE_ENV === 'test') {\n  require('raf').polyfill(global);\n}\n"],"sourceRoot":""}